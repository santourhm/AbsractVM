#!/bin/sh

DECAC_HOME=$(cd "$(dirname "$0")"/../../../../ && pwd)
CP_FILE="$DECAC_HOME"/target/generated-sources/classpath.txt

CP="$DECAC_HOME"/target/test-classes/:"$DECAC_HOME"/target/classes/:$(cat "$CP_FILE")

<<<<<<< HEAD

#le répertoire contenant les fichiers d'entrée
INPUT_DIR="$DECAC_HOME"/src/test/deca/syntax/invalid/provided

# Vérification d'existance
if [ ! -d "$INPUT_DIR" ]; then
  echo "Le répertoire $INPUT_DIR n'existe pas."
  exit 1
fi

# Parcours des fichiers dans le répertoire
for file in "$INPUT_DIR"/*.deca; do
  # Vérification si le fichier existe (utile si le pattern *.deca ne trouve rien)
  if [ -f "$file" ]; then
    echo -e "\e[31mTraitement du fichier : $file\e[0m"
    java -enableassertions -cp "$CP" fr.ensimag.deca.syntax.ManualTestSynt "$file"
  else
    echo "Aucun fichier .deca trouvé dans $INPUT_DIR"
    exit 1
  fi
done


# de meme pour valid
INPUT_DIR="$DECAC_HOME"/src/test/deca/syntax/valid/provided

if [ ! -d "$INPUT_DIR" ]; then
  echo "Le répertoire $INPUT_DIR n'existe pas."
  exit 1
fi

for file in "$INPUT_DIR"/*.deca; do
  if [ -f "$file" ]; then
    echo -e "\e[31mTraitement du fichier : $file\e[0m"
    java -enableassertions -cp "$CP" fr.ensimag.deca.syntax.ManualTestSynt "$file"
  else
    echo "Aucun fichier .deca trouvé dans $INPUT_DIR"
    exit 1
  fi
done
=======
exec java -enableassertions -cp "$CP" fr.ensimag.deca.syntax.ManualTestSynt "$@"


>>>>>>> fef4f4ac2c4014390789362685cb19dd795b5c11
